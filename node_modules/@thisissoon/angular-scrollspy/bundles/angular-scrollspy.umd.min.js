!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@thisissoon/angular-inviewport")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@thisissoon/angular-inviewport"],t):t((e.thisissoon=e.thisissoon||{},e.thisissoon["angular-scrollspy"]={}),e.ng.core,e.InViewportModule)}(this,function(e,t,o){"use strict";var n=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.ScrollSpyItemDirective=function(){function e(e){this.cdRef=e,this.active=!1,this.inViewport=!1}return Object.defineProperty(e.prototype,"section",{get:function(){return this.href.replace("#","")},enumerable:!0,configurable:!0}),e.prototype.detectChanges=function(){this.cdRef.detectChanges()},e}(),n([t.HostBinding("class.active"),i("design:type",Object)],e.ScrollSpyItemDirective.prototype,"active",void 0),n([t.Input(),i("design:type",String)],e.ScrollSpyItemDirective.prototype,"for",void 0),n([t.Input(),i("design:type",String)],e.ScrollSpyItemDirective.prototype,"href",void 0),e.ScrollSpyItemDirective=n([t.Directive({selector:"[snScrollSpyItem]"}),i("design:paramtypes",[t.ChangeDetectorRef])],e.ScrollSpyItemDirective);var r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};e.ScrollSpyService=function(){function e(){this.spys=[],this.buffer=[]}return e.prototype.addSpy=function(e,t){var o=this;this.spys.push({id:e,items:t});var n=this.buffer.filter(function(t){return t.spyId===e});this.buffer=this.buffer.filter(function(t){return t.spyId!==e}),n.forEach(function(e){return o.setSpySectionStatus(e.sectionId,e.spyId,e.inViewport)})},e.prototype.removeSpy=function(e){var t=this.spys.findIndex(function(t){return t.id===e});this.spys.splice(t,1)},e.prototype.setSpySectionStatus=function(e,t,o){var n=this.spys.find(function(e){return e.id===t});if(n){var i=n.items.find(function(t){return t.section===e});if(i){i.inViewport=o;var r=n.items.filter(function(e){return e.inViewport})[0];n.items.forEach(function(e){return e.active=!1}),r&&(r.active=!0,r.detectChanges())}}else this.buffer.push({sectionId:e,spyId:t,inViewport:o})},e}(),e.ScrollSpyService=r([t.Injectable()],e.ScrollSpyService);var c=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.ScrollSpyDirective=function(){function e(e){this.scrollSpySvc=e}return e.prototype.ngAfterViewInit=function(){this.scrollSpySvc.addSpy(this.id,this.items)},e.prototype.ngOnDestroy=function(){this.scrollSpySvc.removeSpy(this.id)},e}(),c([t.ContentChildren(e.ScrollSpyItemDirective),p("design:type",t.QueryList)],e.ScrollSpyDirective.prototype,"items",void 0),c([t.Input(),p("design:type",String)],e.ScrollSpyDirective.prototype,"id",void 0),e.ScrollSpyDirective=c([t.Directive({selector:"[snScrollSpy]",queries:{spyItems:new t.ContentChildren(e.ScrollSpyItemDirective)}}),p("design:paramtypes",[e.ScrollSpyService])],e.ScrollSpyDirective);var l=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.ScrollSpySectionComponent=function(){function e(e){this.scrollSpySvc=e,this.debounce=0}return e.prototype.onInViewportChange=function(e){this.scrollSpySvc.setSpySectionStatus(this.id,this["for"],e)},e}(),l([t.Input(),s("design:type",String)],e.ScrollSpySectionComponent.prototype,"id",void 0),l([t.Input(),s("design:type",String)],e.ScrollSpySectionComponent.prototype,"for",void 0),l([t.Input(),s("design:type",Object)],e.ScrollSpySectionComponent.prototype,"debounce",void 0),e.ScrollSpySectionComponent=l([t.Component({selector:"sn-scroll-spy-section",template:'\n    <div\n      class="sn-hidden"\n      snInViewport\n      (inViewportChange)="onInViewportChange($event)"\n      [debounce]="debounce">\n    </div>\n    <ng-content></ng-content>\n  ',styles:["\n    :host {\n      display: block;\n      position: relative; }\n\n    .sn-hidden {\n      bottom: 0;\n      left: 0;\n      opacity: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      z-index: -1; }\n  "]}),s("design:paramtypes",[e.ScrollSpyService])],e.ScrollSpySectionComponent);var f=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},y=[e.ScrollSpyDirective,e.ScrollSpyItemDirective],u=[e.ScrollSpySectionComponent],a=[e.ScrollSpyService];e.ScrollSpyModule=d=function(){function e(){}return e.forRoot=function(){return{ngModule:d,providers:a.slice()}},e}(),e.ScrollSpyModule=d=f([t.NgModule({imports:[o.InViewportModule],declarations:y.concat(u),exports:y.concat(u)})],e.ScrollSpyModule);var d;Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-scrollspy.umd.min.js.map
