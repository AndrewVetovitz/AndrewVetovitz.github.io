!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/observable/fromEvent"),require("rxjs/add/operator/auditTime"),require("rxjs/add/operator/debounceTime"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/observable/merge")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Observable","rxjs/Subject","rxjs/observable/fromEvent","rxjs/add/operator/auditTime","rxjs/add/operator/debounceTime","rxjs/add/operator/takeUntil","rxjs/add/observable/merge"],t):t((e.thisissoon=e.thisissoon||{},e.thisissoon["angular-inviewport"]={}),e.ng.core,e.Rx,e.Rx,e.Rx.Observable)}(this,function(e,t,n,r,i){"use strict";var o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};e.WindowRef=function(){return function(){}}(),e.WindowRef=o([t.Injectable()],e.WindowRef);var s="class.sn-viewport-in",c="class.sn-viewport-out",p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.InViewportDirective=function(){function e(e,n,i,o){this.el=e,this.win=n,this.cdRef=i,this.ngZone=o,this.viewport$=new r.Subject,this.ngUnsubscribe$=new r.Subject,this.inViewportChange=new t.EventEmitter,this.debounce=100}return Object.defineProperty(e.prototype,"isInViewport",{get:function(){return this.inViewport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotInViewport",{get:function(){return!this.inViewport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return{bottom:this.win.innerHeight,right:this.win.innerWidth,left:0,top:0}},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.calculateInViewportStatus(),this.cdRef.detectChanges(),this.viewport$.takeUntil(this.ngUnsubscribe$).debounceTime(this.debounce).subscribe(function(){return e.calculateInViewportStatus()}),this.ngZone.runOutsideAngular(function(){n.Observable.merge(i.fromEvent(e.win,"resize"),i.fromEvent(e.win,"scroll")).auditTime(e.debounce).subscribe(function(){return e.onViewportChange()})}),this.parent&&this.ngZone.runOutsideAngular(function(){i.fromEvent(e.parent,"scroll").auditTime(e.debounce).subscribe(function(){return e.onParentScroll()})})},e.prototype.onParentScroll=function(){this.viewport$.next()},e.prototype.onViewportChange=function(){this.viewport$.next()},e.prototype.calculateInViewportStatus=function(){var e=this,t=this.el.nativeElement,n=!1,r=!1;if(this.parent){var i=this.parent.getBoundingClientRect();n=this.isInElementViewport(i,t),r=this.isInElementViewport(this.viewport,this.parent)}else n=!0,r=this.isInElementViewport(this.viewport,t);var o=this.inViewport;this.inViewport=n&&r,o!==this.inViewport&&this.ngZone.run(function(){return e.inViewportChange.emit(e.inViewport)})},e.prototype.isInElementViewport=function(e,t){if("function"==typeof t.getBoundingClientRect){var n=t.getBoundingClientRect();return(n.top>=e.top&&n.top<=e.bottom||n.bottom>=e.top&&n.bottom<=e.bottom||n.top<=e.top&&n.bottom>=e.bottom)&&(n.left>=e.left&&n.left<=e.right||n.right>=e.left&&n.right<=e.right||n.left<=e.left&&n.right>=e.right)}return!1},e.prototype.ngOnDestroy=function(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()},e}(),p([t.Output(),a("design:type",Object)],e.InViewportDirective.prototype,"inViewportChange",void 0),p([t.Input(),a("design:type",Object)],e.InViewportDirective.prototype,"debounce",void 0),p([t.Input(),a("design:type",Object)],e.InViewportDirective.prototype,"parent",void 0),p([t.HostBinding(s),a("design:type",Boolean),a("design:paramtypes",[])],e.InViewportDirective.prototype,"isInViewport",null),p([t.HostBinding(c),a("design:type",Boolean),a("design:paramtypes",[])],e.InViewportDirective.prototype,"isNotInViewport",null),e.InViewportDirective=p([t.Directive({selector:"[inViewport], [snInViewport]"}),a("design:paramtypes",[t.ElementRef,e.WindowRef,t.ChangeDetectorRef,t.NgZone])],e.InViewportDirective);var u=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},l=[e.WindowRef];e.InViewportModule=f=function(){function e(){}return e.forRoot=function(e){return void 0===e&&(e=l),{ngModule:f,providers:e}},e}(),e.InViewportModule=f=u([t.NgModule({declarations:[e.InViewportDirective],exports:[e.InViewportDirective]})],e.InViewportModule);var f;e.eventPathResize=["$event.target.innerHeight","$event.target.innerWidth","$event.target.scrollY","$event.target.scrollX"],e.eventPathScroll=["$event.target.defaultView.innerHeight","$event.target.defaultView.innerWidth","$event.target.defaultView.scrollY","$event.target.defaultView.scrollX"],e.eventScroll="scroll",e.eventWindowResize="resize",e.eventWindowScroll="scroll",e.inViewportClass=s,e.notInViewportClass=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-inviewport.umd.min.js.map
